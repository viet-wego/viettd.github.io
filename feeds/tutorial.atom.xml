<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Get the shit done - tutorial</title><link href="https://viettran.me/" rel="alternate"></link><link href="https://viettran.me/feeds/tutorial.atom.xml" rel="self"></link><id>https://viettran.me/</id><updated>2018-10-08T13:40:00+08:00</updated><entry><title>Install &amp; configure PostgreSQL on Ubuntu</title><link href="https://viettran.me/install-n-configure-postgresql-on-ubuntu.html" rel="alternate"></link><published>2018-10-08T13:40:00+08:00</published><updated>2018-10-08T13:40:00+08:00</updated><author><name>Viet Tran</name></author><id>tag:viettran.me,2018-10-08:/install-n-configure-postgresql-on-ubuntu.html</id><summary type="html">&lt;p&gt;How to install &amp;amp; configure PostgreSQL on Ubuntu.&lt;/p&gt;</summary><content type="html">&lt;p&gt;This tutorial is using &lt;a href="https://en.wikipedia.org/wiki/Vi"&gt;vi&lt;/a&gt; editor. You can use any editor you want. &lt;/p&gt;
&lt;h3&gt;Add PostgreSQL repository to &lt;strong&gt;apt&lt;/strong&gt; package list&lt;/h3&gt;
&lt;p&gt;Ubuntu only comes with a default version of PostgreSQL. Because we need to install a specific version needed for our work. So we will add the PosgreSQL repository to our oackage list.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Edit this file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo vi /etc/apt/sources.list.d/pgdg.list
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add this line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://apt.postgresql.org/pub/repos/apt/&lt;/span&gt; &lt;span class="kp"&gt;xenial-pgdg&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Import the repository signing key, and update the package list:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt-get update
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Install PostgreSQL&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Our current system requires PostgreSQL 9.4. So I will install version &lt;strong&gt;9.4&lt;/strong&gt;. Replace it with your choice:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install -y postgresql-client-9.4 postgresql-9.4 postgresql-contrib-9.4 libpq-dev postgresql-server-dev-9.4
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PostgreSQL created a default user, named &lt;strong&gt;postgres&lt;/strong&gt;, during installation. This user doesn't yet have a password, so you'll need to set one.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Run &lt;strong&gt;PSQL&lt;/strong&gt; as user &lt;strong&gt;postgres&lt;/strong&gt;, instead of &lt;strong&gt;root&lt;/strong&gt;, accesssing the database named &lt;strong&gt;postgres&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo -u postgres psql postgres
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You should see the PSQL command prompt, which looks like this: &lt;code&gt;postgres=#&lt;/code&gt;.
Set the password with this command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;\password postgres
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When prompted, enter and confirm the password you've chosen&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install the &lt;strong&gt;adminpack&lt;/strong&gt; extension to use with some administration and management tools. The console prints &lt;strong&gt;CREATE EXTENSION&lt;/strong&gt; when successful.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;CREATE EXTENSION adminpack;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2d. Enter &lt;code&gt;\q&lt;/code&gt; to exit &lt;strong&gt;PSQL&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Allow access to PostgreSQL&lt;/h3&gt;
&lt;p&gt;PostgreSQL only allows access from localhost. We need to change its configuratin to allow remote access.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Edit &lt;strong&gt;pg_hba.conf&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo vi /etc/postgresql/9.4/main/pg_hba.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This file contains a very clear information. You can base on this to add your configuration. In this tutorial, I will allow access from all clients by adding this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# allow access from all hosts
host    all             all             all                     md5
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Edit &lt;strong&gt;postgresql.conf&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo vi /etc/postgresql/9.4/main/postgresql.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Find this &lt;code&gt;#listen_addresses = 'localhost'&lt;/code&gt; &amp;amp; replace with &lt;code&gt;listen_addresses = '*'&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Save the file &amp;amp; exit. Then restart &lt;strong&gt;postgresql&lt;/strong&gt; service:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo service postgresql restart
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;References:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://cloud.google.com/community/tutorials/setting-up-postgres"&gt;How to Set Up PostgreSQL on Google Compute Engine&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="postgresql"></category><category term="ubuntu"></category><category term="linux"></category><category term="devops"></category></entry></feed>